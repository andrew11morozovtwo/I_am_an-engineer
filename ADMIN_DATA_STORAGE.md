# üìä –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **SQLite –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**.

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

**–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker):**
- –§–∞–π–ª: `app.db` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—É—Ç—å: `C:\zero_code\Always_safe\app.db`
- URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: `sqlite+aiosqlite:///app.db`

**Docker:**
- –§–∞–π–ª: `data/app.db` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—É—Ç—å: `C:\zero_code\Always_safe\data\app.db`
- URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: `sqlite+aiosqlite:///data/app.db`

---

## üìã –¢–∞–±–ª–∏—Ü–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã: `admins`

**–§–∞–π–ª –º–æ–¥–µ–ª–∏:** `app/infrastructure/db/models.py`  
**–ö–ª–∞—Å—Å –º–æ–¥–µ–ª–∏:** `Admin`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `admins`:

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | Integer (PK) | –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| `user_id` | Integer (UNIQUE, INDEX) | Telegram user_id –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| `username` | String(64) | @username –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL) |
| `full_name` | String(128) | –ü–æ–ª–Ω–æ–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL) |
| `role` | String(32) | –†–æ–ª—å: `moderator`, `senior_admin`, `owner` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `moderator`) |
| `is_active` | Boolean | –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `True`) |
| `added_by` | Integer | user_id —Ç–æ–≥–æ, –∫—Ç–æ –¥–æ–±–∞–≤–∏–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL) |
| `created_at` | DateTime | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ (UTC) |
| `updated_at` | DateTime | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (UTC, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è) |

---

## üîß –ö–æ–¥ –º–æ–¥–µ–ª–∏

**–§–∞–π–ª:** `app/infrastructure/db/models.py` (—Å—Ç—Ä–æ–∫–∏ 30-44)

```python
class Admin(Base):
    """
    –ú–æ–¥–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å –ø—Ä–∞–≤–∞–º–∏.
    """
    __tablename__ = "admins"
    
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, unique=True, nullable=False, index=True)  # Telegram user_id
    username = Column(String(64), nullable=True)  # @username
    full_name = Column(String(128), nullable=True)  # –ò–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    role = Column(String(32), default="moderator", nullable=False)  # moderator, senior_admin, owner
    is_active = Column(Boolean, default=True, nullable=False)  # –ú–æ–∂–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
    added_by = Column(Integer, nullable=True)  # user_id –∫—Ç–æ –¥–æ–±–∞–≤–∏–ª
    created_at = Column(DateTime, default=datetime.datetime.utcnow, nullable=False)
    updated_at = Column(DateTime, default=datetime.datetime.utcnow, onupdate=datetime.datetime.utcnow, nullable=False)
```

---

## üõ†Ô∏è –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏

**–§–∞–π–ª:** `app/infrastructure/db/repositories.py`  
**–ö–ª–∞—Å—Å:** `AdminRepository` (—Å—Ç—Ä–æ–∫–∏ 216-310)

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

1. **`add_admin()`** - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. **`remove_admin()`** - –£–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ: `is_active=False`)
3. **`get_admin()`** - –ü–æ–ª—É—á–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ `user_id`
4. **`get_all_admins()`** - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
5. **`is_admin()`** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
6. **`get_admin_role()`** - –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
7. **`update_admin_role()`** - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
8. **`update_admin_info()`** - –û–±–Ω–æ–≤–∏—Ç—å username –∏ full_name

---

## üîê –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏

**–§–∞–π–ª:** `app/application/services/admin_service.py`

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

- `is_admin(user_id)` - –ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- `check_admin_permission(user_id, required_role)` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- `get_admin_role(user_id)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–∏
- `can_add_admin(performer_id, target_role)` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞
- `can_remove_admin(performer_id, target_user_id)` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞
- `can_change_role(performer_id, target_role, new_role)` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏
- `add_admin()` - –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `remove_admin()` - –£–¥–∞–ª–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `change_admin_role()` - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
- `get_all_admins()` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `get_admin_info(user_id)` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–µ

---

## üìù –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**–§–∞–π–ª:** `app/main.py`  
**–§—É–Ω–∫—Ü–∏—è:** `initialize_admins()` (—Å—Ç—Ä–æ–∫–∞ 66)

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `initialize_admins()`
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –µ—Å—Ç—å –ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –ï—Å–ª–∏ –±–∞–∑–∞ –ø—É—Å—Ç–∞, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `ADMIN_IDS` - —Å–ø–∏—Å–æ–∫ user_id —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–ø–æ–ª—É—á–∞—é—Ç —Ä–æ–ª—å `moderator`)
   - `OWNER_ID` - –≥–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ø–æ–ª—É—á–∞–µ—Ç —Ä–æ–ª—å `owner`)

### –ü—Ä–∏–º–µ—Ä –∏–∑ `.env`:

```env
ADMIN_IDS=123456789,987654321
OWNER_ID=123456789
```

---

## üîç –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ SQLite

**–û—Ç–∫—Ä—ã—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
```bash
sqlite3 app.db
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É admins:**
```sql
SELECT * FROM admins;
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**
```sql
SELECT * FROM admins WHERE is_active = 1;
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ —Ä–æ–ª—è–º:**
```sql
SELECT * FROM admins WHERE role = 'owner';
SELECT * FROM admins WHERE role = 'senior_admin';
SELECT * FROM admins WHERE role = 'moderator';
```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `/admin`
2. –ù–∞–∂–º–∏—Ç–µ "üëÆ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã" (—Ç–æ–ª—å–∫–æ –¥–ª—è senior_admin –∏ owner)
3. –ù–∞–∂–º–∏—Ç–µ "üìã –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤"

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç–∞

```
/admins
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —Ä–æ–ª—è–º.

---

## üîÑ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram Bot   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ admin_service   ‚îÇ  ‚Üê –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ AdminRepository ‚îÇ  ‚Üê –†–∞–±–æ—Ç–∞ —Å –ë–î (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SQLAlchemy     ‚îÇ  ‚Üê ORM, –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SQLite DB      ‚îÇ  ‚Üê –§–∞–π–ª app.db –∏–ª–∏ data/app.db
‚îÇ  –¢–∞–±–ª–∏—Ü–∞: admins‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ

```sql
id | user_id   | username    | full_name      | role         | is_active | added_by | created_at          | updated_at          |
---|-----------|-------------|----------------|--------------|-----------|----------|---------------------|---------------------|
1  | 123456789 | @admin_user | –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | owner        | 1         | NULL     | 2026-01-21 10:00:00 | 2026-01-21 10:00:00 |
2  | 987654321 | @moderator  | –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | moderator    | 1         | 123456789| 2026-01-21 11:00:00 | 2026-01-21 11:00:00 |
3  | 111222333 | @senior     | –°–∏–¥–æ—Ä –°–∏–¥–æ—Ä–æ–≤  | senior_admin | 1         | 123456789| 2026-01-21 12:00:00 | 2026-01-21 12:00:00 |
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** (`app.db` –∏–ª–∏ `data/app.db`) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `.gitignore` –∏ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ Git
2. **–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:** –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`remove_admin()`) –∑–∞–ø–∏—Å—å –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏, –∞ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞—è (`is_active=False`)
3. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:** `user_id` –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `UNIQUE`, –ø–æ—ç—Ç–æ–º—É –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –¥–≤–∞–∂–¥—ã
4. **–ò–Ω–¥–µ–∫—Å—ã:** `user_id` –∏–º–µ–µ—Ç –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
```sql
SELECT id, user_id, username, full_name, role, is_active, created_at 
FROM admins 
ORDER BY role, created_at;
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö:
```sql
SELECT * FROM admins WHERE is_active = 1;
```

### –ü–æ–¥—Å—á–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ —Ä–æ–ª—è–º:
```sql
SELECT role, COUNT(*) as count 
FROM admins 
WHERE is_active = 1 
GROUP BY role;
```

### –ü–æ–∏—Å–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ user_id:
```sql
SELECT * FROM admins WHERE user_id = 123456789;
```

### –ò—Å—Ç–æ—Ä–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
```sql
SELECT 
    a.user_id,
    a.username,
    a.role,
    a.created_at,
    added.username as added_by_username
FROM admins a
LEFT JOIN admins added ON a.added_by = added.user_id
WHERE a.is_active = 1
ORDER BY a.created_at DESC;
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã:** –¢–∞–±–ª–∏—Ü–∞ `admins` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `async_init_db()` –≤ `app/infrastructure/db/session.py`

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ü–æ–ª–µ `updated_at` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è `onupdate=datetime.datetime.utcnow`

3. **–°–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π users:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ù–ï –∏–º–µ—é—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `users`, –Ω–æ `user_id` –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å `users.id` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã

4. **–†–æ–ª–∏:** –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω—ã –≤ –∫–æ–¥–µ:
   - `moderator` (—É—Ä–æ–≤–µ–Ω—å 1)
   - `senior_admin` (—É—Ä–æ–≤–µ–Ω—å 2)
   - `owner` (—É—Ä–æ–≤–µ–Ω—å 3)

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ, –≥–¥–µ –∏ –∫–∞–∫ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤! üéâ
